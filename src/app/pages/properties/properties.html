<section class="hero">
  <div class="hero-content">
    <h1>Nuestras Propiedades</h1>
    <p>Descubre nuestra selección de propiedades con auténtico carácter irlandés. Cada hogar ha sido cuidadosamente
      seleccionado para ofrecerte lo mejor en confort, diseño y ubicación.</p>
  </div>
</section>

<!-- Main Content -->
<div class="container">
  <!-- Propiedades -->
  <main class="content">
    <div class="content-header">
      <div class="filter-info">
        @if (isFilter) {
        <div class="header-properties">
          <p>Propiedades que cumplen con el filtro aplicado recientemente</p>
          <button (click)="filterClear()" class="btn-link" style="display:none;">Limpiar filtro</button>
        </div>
        }
        @else { <p>Mostrando 10 propiedades</p> }
      </div>

      <label>
        <span>Ordenar por:</span>
        <select>
          <option>Más recientes</option>
          <option>Precio: menor a mayor</option>
          <option>Precio: mayor a menor</option>
        </select>
      </label>
    </div>

    <div class="grid">

      @for (p of properties; track $index) {
      <!-- Card 1 -->
      <article class="card">
        <div class="card-image">
          <img [src]="p.mainImage" alt="Propiedad en venta">
          <span class="badge">{{p.operationTypeDTO.operationName}}</span>
        </div>
        <div class="card-body">
          <h2>{{p.title}}</h2>
          <div class="location">
            <svg width="16" height="16" fill="#0d9e6d" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" />
            </svg>
            <span>{{p.zoneDTO.zoneName}}</span>
          </div>
          <p>{{p.description}}</p>
          <div class="card-footer">
            <div class="price">{{p.price}}</div>
            <div class="features">
              <div class="feature">
                <svg width="20" height="20" fill="#0d9e6d" viewBox="0 0 20 20">
                  <path
                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                </svg>
                <span>{{p.rooms}}</span>
              </div>
              <div class="feature">
                <svg width="20" height="20" fill="#0d9e6d" viewBox="0 0 20 20">
                  <path
                    d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
                </svg>
                <span>{{p.bathrooms}}</span>
              </div>
            </div>
          </div>
        </div>
      </article>
      }
    </div>
  </main>

  <!-- Filtros Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Filtros</h2>
      <button type="button" class="btn-link" (click)="filterClear()">Limpiar filtros</button>
    </div>

    <form class="filter-form" [formGroup]="form">
      <!-- Tipo de operación -->
      <fieldset>
        <legend>Tipo de operación</legend>
        <div class="form-group">
          <select id="operation-type" formControlName="operationTypes">
            <option value="" disabled selected >Seleccionar operación</option>
            @for (operation of operationTypes; track $index) {
            <option>{{operation.operationName}}</option>
            }
          </select>
        </div>
      </fieldset>

      <!-- Tipo de propiedad -->
      <fieldset>
        <legend>Tipo de Propiedad</legend>
        <div class="form-group">
          <select id="property-type" formControlName="propertyTypes">
            <option value="" disabled selected>Seleccionar tipo</option>
            @for (type of propertyTypes; track $index) {
            <option>{{type.typeName}}</option>
            }
          </select>
        </div>
      </fieldset>

      <!-- Zona -->
      <fieldset>
        <legend>Zona</legend>
        <div class="form-group">
          <select id="zone" formControlName="zones">
            <option value="" disabled selected>Seleccionar zona</option>
            @for (zone of zones; track $index) {
            <option>{{zone.zoneName}}</option>
            }
          </select>
        </div>
      </fieldset>

      <!-- Rango de precio -->
      <fieldset>
        <legend>Rango de precio</legend>
        <div class="price-grid">
          <div class="form-group">
            <label for="minPrice">Mínimo</label>
            <select id="minPrice" formControlName="minPrice">
              <option value="0">€0</option>
              <option value="50000">€50,000</option>
              <option value="100000">€100,000</option>
              <option value="200000">€200,000</option>
            </select>
          </div>
          <div class="form-group">
            <label for="maxPrice">Máximo</label>
            <select id="maxPrice" formControlName="maxPrice">
              <option value="0">Sin límite</option>
              <option value="200000">€200,000</option>
              <option value="500000">€500,000</option>
              <option value="1000000">€1,000,000</option>
            </select>
          </div>
        </div>
      </fieldset>

      <!-- Habitaciones -->
      <fieldset>
        <legend>Ambientes</legend>
        <div class="rooms">
          @for (num of numberRooms; track $index) {
          <button type="button" [class.seleccionado]="num === numberRoomsSelect"
            (click)="setRoomsValuee(num)">{{num}}+</button>
          }
        </div>
      </fieldset>

      <!-- Características -->
      <fieldset>
        <legend>Características</legend>
        <div class="amenities">
          @for (am of amenities; track $index){
          <label class="checkbox-label">
            <input type="checkbox" formControlName="amenities">
            <span>{{am.amenityName}}</span>
          </label>
          }
        </div>
      </fieldset>

      <button type="submit" class="btn-primary" (click)="onSumbit()">Aplicar filtros</button>
    </form>
  </aside>
</div>

<!-- CTA -->
<section class="cta">
  <h2>¿No encuentras lo que buscas?</h2>
  <p>Contacta con nuestro equipo de expertos y te ayudaremos a encontrar la propiedad perfecta para ti.</p>
  <button class="btn-cta" routerLink="/contact">Contactar ahora</button>
</section>