<div class="images-section">
    <h3 class="images-title">Im√°genes</h3>

    <div class="drop-zone" (click)="fileInput.click()" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
        <div class="upload-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
        </div>
        <p class="upload-text">Seleccionar im√°genes</p>
        <p class="upload-subtext">o arrastra y suelta aqu√≠</p>
        <input type="file" #fileInput (change)="onFileSelected($event)" multiple accept="image/*"
            style="display: none;">
    </div>

    @if (group.get('images')?.hasError('required')) { <p class="p-error">Este campo es obligatorio</p> }

    <div class="preview-container">
        @if (imagePreviews.length > 0) {
        <div class="preview-header">
            <div class="preview-title">
                Vista previa
                <span class="images-count">{{ imagePreviews.length }}</span>
            </div>
            <button class="clear-all-button" (click)="clearAllImages()" type="button">
                üóëÔ∏è Eliminar todas
            </button>
        </div>

        <div class="images-grid">
            @for (image of imagePreviews; track image.previewUrl) {
            <div class="image-card">
                <img [src]="image.previewUrl" [alt]="image.file?.name" class="preview-image">
                <div class="image-overlay">
                    <button class="remove-btn" (click)="removeImage($index)" type="button" title="Eliminar">√ó</button>
                </div>
                <div class="image-info">
                    <span class="image-name">{{ image.file?.name }}</span>
                </div>
            </div>
            }
        </div>
        }
    </div>
</div>